<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>üîê Secret Cipher Hub</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#0b5ed7">
  <style>
    body {
      font-family:'Segoe UI',Arial,sans-serif;
      margin:0; padding:0; min-height:100vh;
      background:linear-gradient(135deg,#6a11cb,#2575fc,#00c9ff,#92fe9d);
      background-size:400% 400%; animation:gradientShift 12s infinite;
      color:#fff; display:flex; flex-direction:column;
    }
    @keyframes gradientShift {0%{background-position:0 50%}50%{background-position:100% 50%}100%{background-position:0 50%}}
    header{text-align:center;padding:20px;background:rgba(0,0,0,0.3);backdrop-filter:blur(8px);}
    main{flex:1;display:flex;flex-wrap:wrap;gap:20px;padding:20px;justify-content:center;}
    section,aside{background:rgba(255,255,255,0.15);backdrop-filter:blur(12px);border-radius:16px;padding:20px;flex:1;min-width:340px;box-shadow:0 8px 24px rgba(0,0,0,.4);}
    textarea{width:100%;min-height:120px;margin:10px 0;padding:12px;border:none;border-radius:10px;background:rgba(0,0,0,0.35);color:#fff;font-size:15px;}
    select{padding:8px;border-radius:8px;border:none;background:#2575fc;color:#fff;font-weight:bold;}
    .controls{display:flex;flex-wrap:wrap;gap:10px;margin-top:10px;}
    .controls button{flex:1;padding:10px;border:none;border-radius:10px;font-weight:bold;cursor:pointer;background:linear-gradient(45deg,#ff416c,#ff4b2b);color:#fff;transition:.3s;}
    .controls button:hover{transform:scale(1.08);}
    .btn-success{background:linear-gradient(45deg,#00c6ff,#0072ff);}
    .btn-danger{background:linear-gradient(45deg,#f85032,#e73827);}
    #toast{position:fixed;bottom:20px;left:50%;transform:translateX(-50%);background:rgba(0,0,0,0.8);color:#fff;padding:10px 18px;border-radius:20px;opacity:0;transition:.5s;}
    #toast.show{opacity:1;bottom:40px;}
    .history-item{border-bottom:1px solid rgba(255,255,255,0.3);padding:5px 0;}
    footer{text-align:center;padding:12px;background:rgba(0,0,0,0.35);}
    /* Quiz */
    #quiz-wrap{margin-top:20px;padding:15px;background:rgba(0,0,0,0.25);border-radius:14px;}
    .quiz-btn{background:linear-gradient(45deg,#ff9800,#ff5722);padding:10px 15px;border:none;border-radius:8px;color:#fff;cursor:pointer;}
    /* Visualizer */
    #visualizer{margin-top:15px;min-height:40px;font-weight:bold;}
  </style>
</head>
<body>
  <header>
    <h1>üîê Secret Cipher Hub</h1>
    <p>Encode ‚Ä¢ Decode ‚Ä¢ Share ‚Ä¢ Play</p>
  </header>
  <main>
    <!-- Cipher Tool -->
    <section>
      <h3>üìù Cipher Tool</h3>
      <label>Cipher Mode:</label>
      <select id="mode">
        <option value="vowel">Vowel Numbers</option>
        <option value="caesar">Caesar Shift (3)</option>
        <option value="atbash">Atbash</option>
        <option value="morse">Morse Code</option>
      </select>
      <label for="input">Input</label>
      <textarea id="input" placeholder="Type your message..."></textarea>
      <label for="output">Output</label>
      <textarea id="output" readonly></textarea>
      <div class="controls">
        <button onclick="encode()">Encode</button>
        <button onclick="decode()">Decode</button>
        <button class="btn-danger" onclick="clearAll()">Clear</button>
        <button class="btn-success" onclick="copyResult()">Copy</button>
        <button onclick="shareResult()">Share</button>
        <button onclick="genQR()">QR Code</button>
      </div>
      <div id="visualizer"></div>
      <!-- Quiz -->
      <div id="quiz-wrap">
        <h3>üß© Daily Quiz</h3>
        <div id="quiz-container">
          <button class="quiz-btn" onclick="startQuiz()">Start Quiz</button>
        </div>
      </div>
    </section>

    <!-- Sidebar -->
    <aside>
      <h3>üìú History</h3>
      <div id="history"></div>
      <div style="margin-top:10px;display:flex;gap:10px;">
        <button class="btn-success" onclick="copyHistory()">Copy All</button>
        <button class="btn-danger" onclick="clearHistory()">Clear</button>
      </div>
      <h3 style="margin-top:20px;">üìû Contact</h3>
      <p><a href="mailto:abdulkadirbukar2006@gmail.com">üìß Email</a></p>
      <p><a href="tel:+2347048684062">üìû Call</a></p>
      <p><a href="https://wa.me/2347048684062" target="_blank">üí¨ WhatsApp</a></p>
    </aside>
  </main>
  <canvas id="qrCanvas" style="display:none;margin:20px auto;"></canvas>
  <div id="toast"></div>
  <footer>Made with ‚ù§Ô∏è Secret Cipher ‚Ä¢ <span id="year"></span></footer>

<script>
  const inputEl=document.getElementById("input"),outputEl=document.getElementById("output"),modeSel=document.getElementById("mode"),toast=document.getElementById("toast"),vis=document.getElementById("visualizer");
  let history=JSON.parse(localStorage.getItem("cipherHistory")||"[]");
  function showToast(msg){toast.textContent=msg;toast.className="show";setTimeout(()=>toast.className=toast.className.replace("show",""),2000);}
  function renderHistory(){document.getElementById("history").innerHTML=history.length?history.map((h,i)=>`<div class="history-item"><b>${h.type}:</b> ${h.result}<br><button onclick="useHistory(${i})">Use</button></div>`).join(""):"<p>No history yet</p>";}
  function saveHistory(item){history.unshift(item);history=history.slice(0,20);localStorage.setItem("cipherHistory",JSON.stringify(history));renderHistory();}

  /* Cipher Implementations */
  function vowelEncode(t){let v={a:"1",e:"2",i:"3",o:"4",u:"5",A:"1",E:"2",I:"3",O:"4",U:"5"};let r="";for(let c of t){r+=v[c]||(/[a-zA-Z]/.test(c)?c+"a":c);}return r;}
  function vowelDecode(t){let v={"1":"a","2":"e","3":"i","4":"o","5":"u"};let r="";for(let i=0;i<t.length;i++){let c=t[i];if(v[c])r+=v[c];else if(/[a-z]/i.test(c)){r+=c;if(t[i+1]==="a")i++;}else r+=c;}return r;}
  function caesarEncode(t){return t.replace(/[a-z]/gi,c=>String.fromCharCode((c.toLowerCase().charCodeAt(0)-97+3)%26+97)).toLowerCase();}
  function caesarDecode(t){return t.replace(/[a-z]/gi,c=>String.fromCharCode((c.toLowerCase().charCodeAt(0)-97-3+26)%26+97)).toLowerCase();}
  function atbashEncode(t){return t.replace(/[a-z]/gi,c=>{let base=c>="a"?"a".charCodeAt(0):"A".charCodeAt(0);return String.fromCharCode(base+25-(c.charCodeAt(0)-base));});}
  function atbashDecode(t){return atbashEncode(t);} // same
  const morseMap={a:".-",b:"-...",c:"-.-.",d:"-..",e:".",f:"..-.",g:"--.",h:"....",i:"..",j:".---",k:"-.-",l:".-..",m:"--",n:"-.",o:"---",p:".--.",q:"--.-",r:".-.",s:"...",t:"-",u:"..-",v:"...-",w:".--",x:"-..-",y:"-.--",z:"--.."," ":"/"};
  const morseRev=Object.fromEntries(Object.entries(morseMap).map(([k,v])=>[v,k]));
  function morseEncode(t){return t.toLowerCase().split("").map(c=>morseMap[c]||c).join(" ");}
  function morseDecode(t){return t.split(" ").map(c=>morseRev[c]||c).join("");}

  function encode(){let text=inputEl.value,mode=modeSel.value,r="";if(mode==="vowel")r=vowelEncode(text);if(mode==="caesar")r=caesarEncode(text);if(mode==="atbash")r=atbashEncode(text);if(mode==="morse")r=morseEncode(text);outputEl.value=r;saveHistory({type:"Encoded",input:text,result:r});visualize(text,r);}
  function decode(){let text=inputEl.value,mode=modeSel.value,r="";if(mode==="vowel")r=vowelDecode(text);if(mode==="caesar")r=caesarDecode(text);if(mode==="atbash")r=atbashDecode(text);if(mode==="morse")r=morseDecode(text);outputEl.value=r;saveHistory({type:"Decoded",input:text,result:r});visualize(text,r);}
  function clearAll(){inputEl.value="";outputEl.value="";vis.innerHTML="";showToast("Cleared");}
  function copyResult(){if(!outputEl.value)return;navigator.clipboard.writeText(outputEl.value);showToast("Copied");}
  function shareResult(){if(!outputEl.value)return;const url=location.origin+location.pathname+"?msg="+encodeURIComponent(outputEl.value)+"&mode="+modeSel.value;navigator.clipboard.writeText(url);showToast("Link Copied!");}
  function useHistory(i){inputEl.value=history[i].result;encode();}
  function visualize(inp,out){vis.textContent=`üîÑ ${inp} ‚Üí ${out}`;}

  // QR Generator (lightweight)
  function genQR(){if(!outputEl.value)return;let canvas=document.getElementById("qrCanvas");canvas.style.display="block";let ctx=canvas.getContext("2d");canvas.width=200;canvas.height=200;ctx.fillStyle="#fff";ctx.fillRect(0,0,200,200);ctx.fillStyle="#000";let data=outputEl.value;for(let i=0;i<data.length;i++){ctx.fillRect((i*10)%200,Math.floor(i/20)*10,8,8);}showToast("QR Generated");}

  // Load from link
  const params=new URLSearchParams(window.location.search);if(params.get("msg")){inputEl.value=params.get("msg");modeSel.value=params.get("mode")||"vowel";decode();}

  // QUIZ (shortened same logic)
  const quizSentences=["The quick brown fox jumps over the lazy dog.","Knowledge is power, but wisdom is everything.","Dream big and dare to fail."];
  let quizIndex=0,quizScore=0,quizTimer;
  function startQuiz(){quizIndex=0;quizScore=0;nextQuestion();}
  function nextQuestion(){if(quizIndex>=3){endQuiz();return;}let s=quizSentences[quizIndex];let e=vowelEncode(s);document.getElementById("quiz-container").innerHTML=`<div>${e}</div><input id="quiz-answer"><button class="quiz-btn" onclick="submitAnswer('${s}')">Submit</button>`;}
  function submitAnswer(c){let a=document.getElementById("quiz-answer").value;if(a.toLowerCase()===c.toLowerCase()){quizScore++;showToast("‚úÖ");}quizIndex++;nextQuestion();}
  function endQuiz(){document.getElementById("quiz-container").innerHTML=`<p>Score: ${quizScore}/3</p>`;}
  
  document.getElementById("year").textContent=new Date().getFullYear();
  renderHistory();
  // real-time
  inputEl.addEventListener("input",()=>encode());
</script>
</body>
</html>