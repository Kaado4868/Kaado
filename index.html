<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>🔐 Secret Cipher</title>
<meta name="viewport" content="width=device-width,initial-scale=1">
<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#ff416c">
<link rel="icon" href="icon-192.png">
<style>
body{margin:0;font-family:Inter,Segoe UI,Roboto,Arial;background:linear-gradient(135deg,#ff416c,#ff4b2b,#1e90ff);background-size:400% 400%;animation:gradientBG 15s ease infinite;color:#222;display:flex;flex-direction:column;align-items:center;min-height:100vh;}
@keyframes gradientBG{0%{background-position:0% 50%}50%{background-position:100% 50%}100%{background-position:0% 50%}}
header{color:white;text-align:center;margin:20px;}
main{background:rgba(255,255,255,0.97);border-radius:14px;box-shadow:0 12px 30px rgba(0,0,0,0.15);padding:20px;max-width:800px;width:90%;display:flex;flex-direction:column;align-items:stretch;}
label{font-weight:600;font-size:14px;margin-top:10px;}
textarea{width:100%;padding:12px;border-radius:10px;border:1px solid #ddd;resize:vertical;font-size:15px;min-height:100px;}
.controls{display:flex;flex-wrap:wrap;gap:10px;margin:12px 0;}
button{flex:1;padding:12px;border:none;border-radius:10px;color:white;font-weight:700;cursor:pointer;background:linear-gradient(90deg,#ff6a88,#5b18b0);box-shadow:0 6px 18px rgba(0,0,0,0.12);transition:transform .15s;}
button:hover{transform:translateY(-3px)}
button.danger{background:linear-gradient(90deg,#ff416c,#ff4b2b)}
button.success{background:linear-gradient(90deg,#11998e,#38ef7d)}
#historyBox{margin-top:16px;}
#historyContent{display:none;max-height:200px;overflow-y:auto;margin-top:10px;}
.history-item{padding:8px 0;border-bottom:1px solid #eee;font-size:14px;}
footer{margin:20px;color:white;text-align:center;}
.play-quiz{background:linear-gradient(90deg,#ffd700,#ff6a88);color:#111;padding:12px 20px;border-radius:12px;border:none;font-weight:800;cursor:pointer;}
.small{font-size:13px;color:#666;}
</style>
</head>
<body>
<header>
  <h1>🔐 Secret Cipher</h1>
  <p>Type → Encode → Decode → Share • Smart Detect</p>
</header>

<main>
  <label for="input">Input</label>
  <textarea id="input" placeholder="Type your message..."></textarea>
  <div class="controls">
    <button id="encodeBtn">🔒 Encode</button>
    <button id="decodeBtn">🔓 Decode</button>
    <button id="smartBtn">🤖 Smart Detect</button>
    <button class="danger" id="clearBtn">🗑 Clear</button>
    <button class="success" id="copyBtn">📋 Copy</button>
    <button id="shareBtn">📤 Share</button>
  </div>
  <label for="output">Output</label>
  <textarea id="output" readonly placeholder="Result will appear here..."></textarea>

  <div id="historyBox">
    <button id="toggleHistory">📜 Show History</button>
    <div id="historyContent"></div>
    <div style="margin-top:8px;display:flex;gap:8px;">
      <button id="copyAll">Copy All</button>
      <button class="danger" id="clearHistory">Clear</button>
    </div>
  </div>

  <div style="margin-top:20px;">
    <h3>📞 Contact</h3>
    <p class="small">Email: <a href="mailto:abdulkadirbukar2006@gmail.com">abdulkadirbukar2006@gmail.com</a></p>
    <p class="small">Phone: <a href="tel:+2347048684062">07048684062</a></p>
    <p class="small"><a href="https://wa.me/2347048684062" target="_blank">Message on WhatsApp</a></p>
  </div>
</main>

<footer>
  <button class="play-quiz" onclick="location.href='quiz.html'">Play Daily Quiz</button>
  <div class="small">Made with ❤️ Secret Cipher • <span id="year"></span></div>
</footer>

<script>
const inputEl=document.getElementById('input');const outputEl=document.getElementById('output');const historyEl=document.getElementById('historyContent');
let historyArr=JSON.parse(localStorage.getItem('cipherHistory')||'[]');

function renderHistory(){
  if(!historyArr.length){historyEl.innerHTML='<p class="small">No history yet.</p>';return;}
  historyEl.innerHTML='';
  historyArr.forEach((h,i)=>{
    const div=document.createElement('div');div.className='history-item';
    div.innerHTML=`<strong>${h.type}:</strong> ${h.result}<br><button onclick="useHistory(${i})">Use</button> <button onclick="copyHistoryItem(${i})">Copy</button>`;
    historyEl.appendChild(div);
  });
}
function saveHistory(item){historyArr.unshift(item);historyArr=historyArr.slice(0,20);localStorage.setItem('cipherHistory',JSON.stringify(historyArr));renderHistory();}
function cipherEncode(text){let vowels={a:'1',e:'2',i:'3',o:'4',u:'5'};let res='';for(let ch of text.toLowerCase()){if(vowels[ch])res+=vowels[ch];else if(/[a-z]/.test(ch))res+=ch+'a';else res+=ch;}return res;}
function cipherDecode(text){let vowels={'1':'a','2':'e','3':'i','4':'o','5':'u'};let res='';for(let i=0;i<text.length;i++){let ch=text[i];if(vowels[ch])res+=vowels[ch];else if(/[a-z]/i.test(ch)){res+=ch;if(text[i+1]==='a')i++;}else res+=ch;}return res;}
function smartDetect(){
  const text=inputEl.value.trim();
  if(!text)return;
  const digitCount=(text.match(/[12345]/g)||[]).length;
  const suffixCount=(text.match(/[a-z]a/g)||[]).length;
  if(digitCount>=suffixCount){const r=cipherDecode(text);outputEl.value=r;saveHistory({type:'Decoded',input:text,result:r});}
  else{const r=cipherEncode(text);outputEl.value=r;saveHistory({type:'Encoded',input:text,result:r});}
}
document.getElementById('encodeBtn').addEventListener('click',()=>{const r=cipherEncode(inputEl.value);outputEl.value=r;saveHistory({type:'Encoded',input:inputEl.value,result:r});});
document.getElementById('decodeBtn').addEventListener('click',()=>{const r=cipherDecode(inputEl.value);outputEl.value=r;saveHistory({type:'Decoded',input:inputEl.value,result:r});});
document.getElementById('smartBtn').addEventListener('click',smartDetect);
document.getElementById('clearBtn').addEventListener('click',()=>{inputEl.value='';outputEl.value='';});
document.getElementById('copyBtn').addEventListener('click',()=>{if(!outputEl.value)return alert('Nothing to copy');navigator.clipboard.writeText(outputEl.value).then(()=>alert('Copied ✅'));});
document.getElementById('shareBtn').addEventListener('click',()=>{if(!outputEl.value)return alert('Nothing to share');if(navigator.share)navigator.share({title:'Secret Cipher',text:outputEl.value});else window.open('https://wa.me/?text='+encodeURIComponent(outputEl.value),'_blank');});
document.getElementById('copyAll').addEventListener('click',()=>{if(!historyArr.length)return alert('No history');navigator.clipboard.writeText(historyArr.map(h=>`${h.type}: ${h.result}`).join('\n'));alert('History copied ✅');});
document.getElementById('clearHistory').addEventListener('click',()=>{if(!confirm('Clear history?'))return;historyArr=[];localStorage.removeItem('cipherHistory');renderHistory();});
function useHistory(i){inputEl.value=historyArr[i].result;smartDetect();}
function copyHistoryItem(i){navigator.clipboard.writeText(historyArr[i].result).then(()=>alert('Copied ✅'));}

document.getElementById('toggleHistory').addEventListener('click',()=>{const hc=document.getElementById('historyContent');if(hc.style.display==='none'||!hc.style.display){hc.style.display='block';document.getElementById('toggleHistory').textContent='📜 Hide History';}else{hc.style.display='none';document.getElementById('toggleHistory').textContent='📜 Show History';}});

document.getElementById('year').textContent=new Date().getFullYear();renderHistory();
</script>
</body>
</html>