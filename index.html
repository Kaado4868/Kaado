<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>üîê Secret Cipher ‚Äî Vowel Numbers</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <style>
    :root{
      --glass: rgba(255,255,255,0.08);
      --card-glow: 0 8px 30px rgba(0,0,0,0.45);
      --accent1: #ff5f8b;
      --accent2: #7b61ff;
      --accent3: #00f0ff;
      --accent4: #5efc82;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;font-family: Inter,"Segoe UI",Arial,sans-serif;color:#fff;
      min-height:100vh;display:flex;flex-direction:column;
      background:
        radial-gradient(1200px 600px at 10% 10%, rgba(123,97,255,0.12), transparent 10%),
        radial-gradient(1000px 500px at 90% 90%, rgba(0,240,255,0.08), transparent 12%),
        linear-gradient(135deg,#0a0f1f,#0d1117 40%,#121826 100%);
      background-size:300% 300%;animation:bgShift 18s ease infinite;
    }
    @keyframes bgShift{0%{background-position:0% 50%}50%{background-position:100% 50%}100%{background-position:0% 50%}}
    header{padding:20px;text-align:center;background:rgba(0,0,0,0.3)}
    main{flex:1;display:flex;gap:20px;padding:20px;flex-wrap:wrap;justify-content:center}
    section,aside{min-width:320px;flex:1;border-radius:16px;padding:18px;background:var(--glass);
      box-shadow:var(--card-glow);backdrop-filter:blur(8px)}
    textarea{width:100%;min-height:110px;border-radius:12px;border:0;padding:12px;margin:10px 0;
      background:rgba(0,0,0,0.35);color:#fff;font-size:15px;resize:vertical}
    .controls{display:flex;gap:10px;flex-wrap:wrap}
    button{padding:10px 12px;border-radius:10px;border:0;cursor:pointer;font-weight:700;color:#fff;
      background-image:linear-gradient(90deg,rgba(255,95,139,0.95),rgba(123,97,255,0.95));
      box-shadow:0 8px 20px rgba(0,0,0,0.4)}
    button.secondary{background-image:linear-gradient(90deg,#00c6ff,#0072ff)}
    button.danger{background-image:linear-gradient(90deg,#ff8a65,#e53935)}
    .history-item{padding:8px;border-radius:8px;margin-bottom:8px;background:rgba(0,0,0,0.14);font-size:14px}
    #toast{position:fixed;bottom:26px;left:50%;transform:translateX(-50%);background:rgba(0,0,0,0.8);
      padding:10px 16px;border-radius:22px;opacity:0;transition:.25s}
    #toast.show{opacity:1;transform:translateX(-50%) translateY(-6px)}
    /* login screen */
    #loginScreen{position:fixed;inset:0;background:rgba(0,0,0,0.9);display:flex;align-items:center;justify-content:center;z-index:99}
    #loginBox{background:#1a1f2f;padding:20px;border-radius:12px;width:300px}
    input{width:100%;padding:8px;margin:6px 0;border-radius:6px;border:0;background:rgba(255,255,255,0.1);color:#fff}
  </style>
</head>
<body>
  <!-- Login -->
  <div id="loginScreen">
    <div id="loginBox">
      <h2>üîë Login / Sign Up</h2>
      <input id="username" placeholder="Username">
      <input id="password" type="password" placeholder="Password">
      <button onclick="login()">Login</button>
      <button onclick="signup()" class="secondary">Sign Up</button>
    </div>
  </div>

  <header>
    <h1>üîê Secret Cipher ‚Äî Vowel Numbers</h1>
    <p id="welcomeUser"></p>
    <button onclick="logout()" class="danger">Logout</button>
  </header>

  <main>
    <section>
      <h3>üìù Cipher Tool</h3>
      <textarea id="input" placeholder="Type message..."></textarea>
      <textarea id="output" readonly placeholder="Result..."></textarea>
      <div class="controls">
        <button onclick="encode()">Encode</button>
        <button onclick="decode()">Decode</button>
        <button onclick="smartDetect()">Smart Detect</button>
        <button onclick="copyResult()" class="secondary">Copy</button>
        <button onclick="clearAll()" class="danger">Clear</button>
      </div>
      <div id="visualizer">üîÑ Visualizer will show here</div>

      <!-- Quiz -->
      <div style="margin-top:16px;background:rgba(0,0,0,0.25);padding:12px;border-radius:10px">
        <h3>üß© Quiz</h3>
        <div id="quiz-status">Not started</div>
        <div id="quiz-container"></div>
        <button onclick="startQuiz()">Start Quiz</button>
      </div>
      <h4>üèÜ Leaderboard</h4>
      <div id="leaderboard"></div>
    </section>
    <aside>
      <h3>üìú History</h3>
      <div id="history"></div>
      <button onclick="clearHistory()" class="danger">Clear History</button>
    </aside>
  </main>

  <footer style="text-align:center;padding:10px">¬© <span id="year"></span></footer>
  <div id="toast"></div>

<script>
  let accounts=JSON.parse(localStorage.getItem("accounts")||"{}");
  let currentUser=null;

  function getUser(){return accounts[currentUser];}
  function save(){localStorage.setItem("accounts",JSON.stringify(accounts));}

  // login/signup/logout
  function login(){
    const u=document.getElementById("username").value.trim();
    const p=document.getElementById("password").value.trim();
    if(!u||!p)return toast("Fill fields");
    if(!accounts[u])return toast("No such user");
    if(accounts[u].password!==p)return toast("Wrong password");
    currentUser=u;localStorage.setItem("currentUser",u);
    document.getElementById("loginScreen").style.display="none";
    document.getElementById("welcomeUser").textContent="Welcome "+u;
    renderHistory();renderLeaderboard();
  }
  function signup(){
    const u=document.getElementById("username").value.trim();
    const p=document.getElementById("password").value.trim();
    if(!u||!p)return toast("Fill fields");
    if(accounts[u])return toast("User exists");
    accounts[u]={password:p,history:[],scores:[]};
    save();toast("Account created");
  }
  function logout(){currentUser=null;localStorage.removeItem("currentUser");document.getElementById("loginScreen").style.display="flex";}

  // toast
  function toast(m){const t=document.getElementById("toast");t.textContent=m;t.classList.add("show");setTimeout(()=>t.classList.remove("show"),2000);}

  // cipher
  const vmap={a:"1",e:"2",i:"3",o:"4",u:"5"};
  const vrev={"1":"a","2":"e","3":"i","4":"o","5":"u"};
  function encode(){const txt=document.getElementById("input").value;let out="";for(const c of txt){if(vmap[c])out+=vmap[c];else if(vmap[c.toLowerCase()])out+=vmap[c.toLowerCase()];else if(/[A-Za-z]/.test(c))out+=c+"a";else out+=c;}document.getElementById("output").value=out;addHist("Encoded",txt,out);}
  function decode(){const txt=document.getElementById("input").value;let out="";for(let i=0;i<txt.length;i++){const c=txt[i];if(vrev[c])out+=vrev[c];else if(/[A-Za-z]/.test(c)&&txt[i+1]==="a"){out+=c;i++;}else out+=c;}document.getElementById("output").value=out;addHist("Decoded",txt,out);}
  function smartDetect(){const txt=document.getElementById("input").value;if(/[1-5]/.test(txt))decode();else encode();}
  function copyResult(){navigator.clipboard.writeText(document.getElementById("output").value);toast("Copied")}
  function clearAll(){document.getElementById("input").value="";document.getElementById("output").value="";}

  // history
  function addHist(type,inp,res){if(!currentUser)return;let u=getUser();u.history.unshift({type,inp,res,date:new Date().toLocaleString()});u.history=u.history.slice(0,20);save();renderHistory();}
  function renderHistory(){if(!currentUser)return;let h=getUser().history||[];document.getElementById("history").innerHTML=h.map(x=>`<div class='history-item'><b>${x.type}</b>: ${x.res} <br><small>${x.date}</small></div>`).join("")||"No history";}
  function clearHistory(){getUser().history=[];save();renderHistory();}

  // quiz
  const qs=["The quick brown fox jumps over the lazy dog.","Knowledge is power, but wisdom is everything.","Dream big and dare to fail.","Great things never come from comfort zones.","Hard work beats talent when talent doesn‚Äôt work hard."];
  let qi=0,score=0,timer=null,pool=[];
  function startQuiz(){qi=0;score=0;pool=[...qs].sort(()=>Math.random()-0.5).slice(0,3);showQ();}
  function showQ(){if(qi>=pool.length)return endQ();let s=pool[qi];let enc=encSen(s);document.getElementById("quiz-container").innerHTML=`<div><b>Q${qi+1}</b>: ${enc}</div><input id='ans'><button onclick="subAns('${s.replace(/'/g,"\\'")}')">Submit</button><div>‚è±<span id='tim'>30</span></div>`;startT();}
  function startT(){let t=30;document.getElementById("tim").textContent=t;clearInterval(timer);timer=setInterval(()=>{t--;document.getElementById("tim").textContent=t;if(t<=0){clearInterval(timer);subAns(null,true)}},1000);}
  function subAns(correct,timeout=false){clearInterval(timer);let a=document.getElementById("ans").value;if(!timeout&&a.toLowerCase()===correct.toLowerCase()){score++;toast("‚úÖ")}else toast("‚ùå");qi++;setTimeout(showQ,800);}
  function endQ(){getUser().scores.push(score);save();renderLeaderboard();document.getElementById("quiz-container").innerHTML=`Done! Score: ${score}/${pool.length}`;}
  function encSen(txt){let out="";for(const c of txt){if(vmap[c])out+=vmap[c];else if(vmap[c.toLowerCase()])out+=vmap[c.toLowerCase()];else if(/[A-Za-z]/.test(c))out+=c+"a";else out+=c;}return out;}

  // leaderboard
  function renderLeaderboard(){if(!currentUser)return;let s=getUser().scores||[];s.sort((a,b)=>b-a);document.getElementById("leaderboard").innerHTML=s.slice(0,5).map((x,i)=>`#${i+1} ‚Üí ${x}`).join("<br>")||"No scores";}

  // init
  document.getElementById("year").textContent=new Date().getFullYear();
  let saved=localStorage.getItem("currentUser");if(saved&&accounts[saved]){currentUser=saved;document.getElementById("loginScreen").style.display="none";document.getElementById("welcomeUser").textContent="Welcome "+saved;renderHistory();renderLeaderboard();}
</script>
</body>
</html>