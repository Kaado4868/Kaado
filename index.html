<!DOCTYPE html>
<html lang="en" class="light"> <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Fatima Store - POS System</title>
    <link rel="manifest" href="./manifest.json?v=1.1.10">
    <link rel="icon" type="image/png" href="./logo.png?v=1.2.0">
    <link rel="apple-touch-icon" href="./logo.png?v=1.2.0">
    <meta name="theme-color" content="#0d9488">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <script src="https://unpkg.com/html5-qrcode" type="text/javascript"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="./styles.css">
    <script>
        tailwind.config = { darkMode: 'class', theme: { extend: { colors: { teal: { 50: '#f0fdfa', 100: '#ccfbf1', 200: '#99f6e4', 300: '#5eead4', 400: '#2dd4bf', 500: '#14b8a6', 600: '#0d9488', 700: '#0f766e', 800: '#115e59', 900: '#134e4a' }, zinc: { 850: '#18181b', 950: '#09090b' } }, fontFamily: { sans: ['Outfit', 'sans-serif'] }, boxShadow: { 'soft': '0 10px 40px -10px rgba(0,0,0,0.05)', 'glow': '0 0 20px rgba(13, 148, 136, 0.3)' } } } }
    </script>
    <script>
        function showError(title, detail) { const overlay = document.getElementById('loading-overlay'); if(overlay) { overlay.classList.remove('hidden'); overlay.innerHTML = `<div class="p-6 text-center text-zinc-900 dark:text-white max-w-sm mx-auto"><div class="w-16 h-16 bg-rose-100 rounded-full flex items-center justify-center mx-auto mb-4"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="#e11d48" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="8" x2="12" y2="12"></line><line x1="12" y1="16" x2="12.01" y2="16"></line></svg></div><h2 class="text-xl font-bold mb-2">${title}</h2><div class="bg-zinc-100 dark:bg-zinc-800 p-4 rounded text-left text-xs font-mono overflow-auto max-h-40 border border-zinc-200 dark:border-zinc-700 mb-6 select-all">${detail}</div><button onclick="window.location.reload()" class="w-full bg-zinc-900 dark:bg-white text-white dark:text-black font-bold py-3 rounded-xl">Tap to Retry</button></div>`; } }
        window.onerror = function(msg, url, line) { if(msg.includes("ResizeObserver")) return false; showError("System Error", `Message: ${msg}\nFile: ${url}\nLine: ${line}`); return false; };
        window.addEventListener('unhandledrejection', function(event) { showError("Network/Data Error", `Reason: ${event.reason ? event.reason.message : event.reason}\n\nCheck your connection.`); });
    </script>
</head>
<body class="bg-zinc-50 dark:bg-black text-zinc-900 dark:text-zinc-100 min-h-screen selection:bg-teal-500 selection:text-white">

    <div id="loading-overlay" class="fixed inset-0 z-[60] bg-zinc-50 dark:bg-black flex flex-col items-center justify-center">
        <div class="mb-6 relative"><div class="absolute inset-0 bg-teal-500/20 rounded-full animate-ping"></div><div class="w-24 h-24 rounded-2xl relative z-10 flex items-center justify-center shadow-2xl bg-white overflow-hidden"><img src="./logo.png" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex'" class="w-full h-full object-contain p-2" alt="Fatima Store"><div class="hidden w-full h-full bg-gradient-to-br from-teal-500 to-teal-700 flex items-center justify-center text-white font-black text-4xl">F</div></div></div>
        <p id="loading-text" class="text-zinc-400 dark:text-zinc-500 font-medium animate-pulse tracking-wide text-xs uppercase">Starting App...</p>
        <button onclick="localStorage.clear(); window.location.reload()" class="absolute bottom-10 text-xs text-zinc-300 hover:text-teal-500 transition-colors">Reset Local Data</button>
    </div>

    <div id="login-screen" class="fixed inset-0 z-50 bg-zinc-50 dark:bg-zinc-950 flex flex-col items-center justify-center p-6 hidden">
        <div class="bg-white/80 dark:bg-zinc-900/80 backdrop-blur-xl p-8 rounded-3xl shadow-soft w-full max-w-sm text-center relative z-10 border border-white/50 dark:border-zinc-800">
            <div class="w-20 h-20 mx-auto mb-6 bg-white rounded-2xl shadow-lg p-2 flex items-center justify-center"><img src="./logo.png" class="w-full h-full object-contain" alt="Logo"></div>
            <h1 class="text-2xl font-black text-zinc-900 dark:text-white mb-2 tracking-tight">Fatima Store</h1>
            <p class="text-sm text-zinc-500 dark:text-zinc-400 mb-8">Secure Point of Sale Terminal</p>
            <form id="login-form" class="space-y-4"><div class="relative group"><input type="text" id="store-name-input" required class="block w-full rounded-2xl border-zinc-200 dark:border-zinc-700 bg-zinc-50 dark:bg-zinc-800 border p-4 text-center text-lg font-bold text-zinc-900 dark:text-white focus:ring-4 focus:ring-teal-500/20 focus:border-teal-500 outline-none uppercase placeholder-zinc-400 transition-all" placeholder="STORE ID"></div><button type="submit" id="login-btn" class="w-full py-4 px-4 bg-white dark:bg-zinc-800 border border-zinc-200 dark:border-zinc-700 rounded-2xl text-zinc-700 dark:text-white font-bold hover:bg-zinc-50 dark:hover:bg-zinc-700 hover:shadow-lg hover:scale-[1.02] active:scale-95 transition-all flex items-center justify-center gap-3 relative overflow-hidden"><svg class="w-5 h-5" viewBox="0 0 24 24"><path d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z" fill="#4285F4"/><path d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z" fill="#34A853"/><path d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z" fill="#FBBC05"/><path d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z" fill="#EA4335"/></svg><span>Sign in with Google</span></button></form>
        </div>
    </div>

    <div id="app-screen" class="hidden min-h-screen pb-32">
        <div class="sticky top-0 z-30 bg-white/90 dark:bg-black/80 backdrop-blur-xl border-b border-zinc-100 dark:border-zinc-900 shadow-sm">
            <div class="max-w-xl mx-auto px-4 py-3">
                <div class="flex items-center justify-between mb-4">
                    <div class="flex items-center gap-3">
                        <div class="w-10 h-10 rounded-xl bg-white p-1 flex items-center justify-center shadow-lg shadow-teal-500/30"><img src="./logo.png" class="w-full h-full object-contain" alt="Logo"></div>
                        <div>
                            <div id="welcome-msg" class="text-[10px] text-zinc-500 dark:text-zinc-400 font-medium">Welcome</div>
                            <h1 class="text-lg font-black tracking-tight leading-none text-zinc-900 dark:text-white flex items-center">Fatima Store</h1>
                            <div id="role-badge" class="text-[10px] text-zinc-400 dark:text-zinc-500 font-bold uppercase tracking-wider mt-0.5">Connecting...</div>
                        </div>
                    </div>
                    <div class="flex items-center gap-2">
                        <button onclick="window.toggleDarkMode()" class="w-9 h-9 flex items-center justify-center rounded-full text-zinc-500 hover:bg-zinc-100 dark:hover:bg-zinc-900 transition-colors"><i id="dark-icon" data-lucide="moon" class="w-5 h-5"></i></button>
                        <button onclick="window.openLedger()" id="ledger-btn" class="hidden w-9 h-9 flex items-center justify-center rounded-full text-zinc-500 bg-zinc-100 dark:bg-zinc-800 transition-all"><i data-lucide="book" class="w-4 h-4"></i></button>
                        <button onclick="window.openSuperAdmin()" id="super-admin-btn" class="hidden w-9 h-9 flex items-center justify-center rounded-full text-white bg-teal-500 dark:bg-teal-600 shadow-lg shadow-teal-500/30 relative active:scale-95 transition-all"><i data-lucide="shield" class="w-4 h-4"></i></button>
                        <button onclick="window.logout()" class="w-9 h-9 flex items-center justify-center rounded-full text-rose-500 bg-rose-50 dark:bg-rose-900/10 hover:bg-rose-100 dark:hover:bg-rose-900/30 transition-colors"><i data-lucide="log-out" class="w-4 h-4"></i></button>
                    </div>
                </div>
                <div class="relative flex gap-2">
                    <div class="relative flex-1 group">
                        <i data-lucide="search" class="absolute left-4 top-3.5 w-5 h-5 text-zinc-400 group-focus-within:text-teal-500 transition-colors"></i>
                        <input type="text" id="search-input" class="block w-full pl-12 pr-10 py-3.5 rounded-2xl bg-zinc-100 dark:bg-zinc-900/50 dark:text-white border-transparent text-zinc-900 placeholder-zinc-400 focus:bg-white dark:focus:bg-zinc-800 focus:ring-4 focus:ring-teal-500/10 focus:border-teal-500 transition-all font-medium" placeholder="Search...">
                        <button id="clear-search" class="absolute right-3 top-3.5 text-zinc-400 hover:text-zinc-600 hidden"><i data-lucide="x" class="w-5 h-5"></i></button>
                    </div>
                </div>
                <div id="category-container" class="flex gap-2 mt-4 overflow-x-auto no-scrollbar pb-1 mask-linear"></div>
            </div>
        </div>

        <div class="max-w-xl mx-auto px-4 py-6">
            <div id="data-loading" class="text-center py-20 hidden"><div class="inline-block animate-spin rounded-full h-10 w-10 border-4 border-teal-100 border-t-teal-600 mb-4"></div><p class="text-zinc-400 text-sm font-bold tracking-wide">SYNCING INVENTORY...</p></div>
            <div id="empty-state" class="hidden text-center py-20 opacity-0 animate-[fadeIn_0.5s_ease-out_forwards]"><div class="bg-zinc-100 dark:bg-zinc-900/50 w-24 h-24 rounded-full flex items-center justify-center mx-auto mb-6"><i data-lucide="search-x" class="w-10 h-10 text-zinc-300"></i></div><h3 class="text-xl font-bold text-zinc-900 dark:text-white mb-2">No items found</h3><p class="text-zinc-500 text-sm">Try a different search term or add a new item.</p></div>
            <div id="item-list" class="space-y-3"></div>
        </div>

        <div id="fab-container" class="fixed bottom-8 right-6 z-20 hidden flex flex-col gap-4">
            <button onclick="window.CartManager.renderModal()" id="cart-fab" class="relative bg-white dark:bg-zinc-800 text-zinc-900 dark:text-white w-16 h-16 rounded-3xl shadow-soft flex items-center justify-center hover:scale-110 active:scale-90 transition-all hidden border border-zinc-100 dark:border-zinc-700">
                <i data-lucide="shopping-bag" class="w-6 h-6 text-teal-500"></i>
                <span id="cart-badge" class="absolute -top-1 -right-1 bg-rose-500 text-white text-[11px] font-bold w-6 h-6 rounded-full flex items-center justify-center hidden ring-2 ring-white dark:ring-zinc-900">0</span>
            </button>
            <button onclick="window.openItemModal()" class="bg-teal-600 text-white w-16 h-16 rounded-3xl shadow-lg shadow-teal-600/30 flex items-center justify-center hover:scale-110 hover:rotate-90 active:scale-90 transition-all"><i data-lucide="plus" class="w-8 h-8"></i></button>
        </div>
    </div>

    <div id="receipt-modal" class="hidden fixed inset-0 z-[100] flex items-center justify-center p-4">
        <div onclick="document.getElementById('receipt-modal').classList.add('hidden')" class="fixed inset-0 bg-zinc-900/80 backdrop-blur-sm no-print"></div>
        <div class="relative bg-white w-full max-w-sm rounded-3xl shadow-2xl overflow-hidden animate-[scaleIn_0.2s_ease-out]">
            <div id="receipt-content" class="p-8 bg-white text-zinc-900">
                <div class="text-center border-b border-dashed border-zinc-300 pb-6 mb-6">
                    <h2 class="text-2xl font-black uppercase tracking-tight mb-2" id="receipt-store-name">Fatima Store</h2>
                    <p class="text-xs text-zinc-500 font-mono" id="receipt-date">Date: --/--/----</p>
                </div>
                <div id="receipt-items-list" class="space-y-2 mb-6 text-sm font-mono"></div>
                <div class="border-t border-dashed border-zinc-300 pt-4">
                    <div class="flex justify-between font-black text-xl"><span>TOTAL</span><span id="receipt-total">₦0.00</span></div>
                </div>
                <div class="text-center mt-8 text-[10px] text-zinc-400 font-mono">Thank you for your patronage!</div>
            </div>
            <div class="p-4 bg-zinc-50 border-t border-zinc-100 flex gap-3 no-print">
                <button onclick="document.getElementById('receipt-modal').classList.add('hidden')" class="flex-1 py-3 text-zinc-500 font-bold hover:bg-zinc-200 rounded-xl transition-colors">Close</button>
                <button onclick="window.print()" class="flex-1 py-3 bg-teal-600 text-white font-bold rounded-xl shadow-lg shadow-teal-500/20 hover:bg-teal-700 transition-colors flex items-center justify-center gap-2"><i data-lucide="printer" class="w-4 h-4"></i> Print</button>
            </div>
        </div>
    </div>

    <div id="cart-modal" class="hidden fixed inset-0 z-50 flex items-end sm:items-center justify-center px-4 py-6 sm:p-6">
        <div onclick="document.getElementById('cart-modal').classList.add('hidden')" class="fixed inset-0 bg-zinc-900/60 backdrop-blur-sm"></div>
        <div class="relative bg-white dark:bg-zinc-900 w-full max-w-sm rounded-3xl shadow-2xl overflow-hidden animate-[slideUp_0.3s_ease-out] flex flex-col max-h-[85vh] border border-zinc-200 dark:border-zinc-800">
            <div class="px-6 py-5 border-b border-zinc-100 dark:border-zinc-800 flex justify-between items-center bg-white/50 dark:bg-zinc-900/50 backdrop-blur-md">
                <h3 class="font-bold text-xl text-zinc-900 dark:text-white flex items-center gap-3"><i data-lucide="shopping-cart" class="w-6 h-6 text-teal-500 fill-teal-500/20"></i> Current Cart</h3>
                <button onclick="document.getElementById('cart-modal').classList.add('hidden')" class="bg-zinc-100 dark:bg-zinc-800 p-2 rounded-full text-zinc-500 hover:text-zinc-900"><i data-lucide="x" class="w-5 h-5"></i></button>
            </div>
            <div id="cart-items" class="flex-1 overflow-y-auto p-6 space-y-4 custom-scrollbar"></div>
            <div class="p-6 border-t border-zinc-100 dark:border-zinc-800 bg-zinc-50 dark:bg-zinc-900/50">
                <div class="flex justify-between items-center mb-6"><span class="text-sm font-medium text-zinc-500 dark:text-zinc-400">Total Amount</span><span id="cart-total" class="text-3xl font-black text-zinc-900 dark:text-white tracking-tight">₦0.00</span></div>
                <button onclick="window.CartManager.checkout()" class="w-full py-4 bg-teal-500 text-white font-bold rounded-2xl shadow-xl shadow-teal-500/20 active:scale-95 transition-all flex items-center justify-center gap-2 hover:bg-teal-600 text-lg">Complete Sale <i data-lucide="arrow-right" class="w-5 h-5"></i></button>
            </div>
        </div>
    </div>

    <div id="ledger-modal" class="hidden fixed inset-0 z-50 flex items-center justify-center px-4 py-6">
        <div onclick="window.closeModal('ledger-modal')" class="fixed inset-0 bg-zinc-900/80 backdrop-blur-sm"></div>
        <div class="relative bg-white dark:bg-zinc-900 w-full max-w-lg h-[80vh] rounded-3xl shadow-2xl flex flex-col overflow-hidden ring-1 ring-white/10">
            <div class="bg-white dark:bg-zinc-900 px-6 py-5 flex justify-between items-center border-b border-zinc-100 dark:border-zinc-800">
                <div class="flex items-center gap-3"><div class="bg-amber-100 dark:bg-amber-900/30 p-2 rounded-xl"><i data-lucide="book" class="w-5 h-5 text-amber-600 dark:text-amber-400"></i></div><h3 class="font-black text-zinc-900 dark:text-white text-lg">Debt Ledger</h3></div>
                <button onclick="window.closeModal('ledger-modal')" class="bg-zinc-100 dark:bg-zinc-800 text-zinc-500 hover:text-zinc-900 p-2 rounded-xl"><i data-lucide="x" class="w-5 h-5"></i></button>
            </div>
            <div class="flex-1 overflow-y-auto p-6 custom-scrollbar bg-zinc-50/50 dark:bg-zinc-950/50">
                <div class="bg-white dark:bg-zinc-800 p-5 rounded-2xl border border-zinc-100 dark:border-zinc-700 shadow-sm mb-4">
                    <form id="debt-form" class="flex flex-col gap-3">
                        <input type="text" id="debt-name" required placeholder="Customer Name" class="w-full p-3 rounded-xl border border-zinc-200 dark:border-zinc-600 dark:bg-zinc-700 dark:text-white text-sm focus:ring-2 focus:ring-teal-500 outline-none">
                        <div class="flex gap-2">
                            <input type="number" id="debt-amount" required placeholder="Amount (₦)" class="flex-1 p-3 rounded-xl border border-zinc-200 dark:border-zinc-600 dark:bg-zinc-700 dark:text-white text-sm focus:ring-2 focus:ring-teal-500 outline-none">
                            <button type="submit" class="bg-teal-600 text-white px-6 rounded-xl font-bold hover:bg-teal-700 shadow-lg">Add</button>
                        </div>
                    </form>
                </div>
                <div class="flex justify-between items-center px-1 mb-2"><span class="text-xs font-bold text-zinc-500 uppercase tracking-wide">Active Debts</span><span id="total-debt" class="text-xs font-bold text-rose-500">Total: ₦0.00</span></div>
                <div id="debt-list" class="space-y-2"></div>
            </div>
        </div>
    </div>

    <div id="modal" class="hidden fixed inset-0 z-40 flex items-end sm:items-center justify-center px-4 py-6 sm:p-6">
        <div onclick="window.closeModal('modal')" class="fixed inset-0 bg-zinc-900/60 backdrop-blur-sm"></div>
        <div class="relative bg-white dark:bg-zinc-900 w-full max-w-sm rounded-3xl shadow-2xl overflow-hidden animate-[slideUp_0.3s_ease-out] border border-zinc-200 dark:border-zinc-800">
            <div class="px-6 py-5 border-b border-zinc-100 dark:border-zinc-800 flex justify-between items-center bg-zinc-50/50 dark:bg-zinc-800/50">
                <h3 id="modal-title" class="font-black text-xl text-zinc-900 dark:text-white">New Item</h3>
                <button onclick="window.closeModal('modal')" class="bg-white dark:bg-zinc-800 p-2 rounded-full text-zinc-400"><i data-lucide="x" class="w-5 h-5"></i></button>
            </div>
            <form id="item-form" class="p-6 space-y-5">
                <input type="hidden" id="item-id">
                <div>
                    <label class="text-xs font-bold text-zinc-500 uppercase tracking-wide mb-1.5 block">Barcode</label>
                    <input type="text" id="barcode-input" class="w-full p-3.5 rounded-xl bg-zinc-50 dark:bg-zinc-800 border border-zinc-200 dark:border-zinc-700 focus:border-teal-500 outline-none font-mono text-sm dark:text-white transition-colors" placeholder="Scan or Type">
                </div>
                <div><label class="text-xs font-bold text-zinc-500 uppercase tracking-wide mb-1.5 block">Name</label><input type="text" id="name-input" required class="w-full p-3.5 rounded-xl bg-zinc-50 dark:bg-zinc-800 border border-zinc-200 dark:border-zinc-700 focus:border-teal-500 outline-none capitalize dark:text-white font-medium" placeholder="Item Name"></div>
                
                <div class="flex gap-4">
                    <div class="flex-1"><label class="text-xs font-bold text-zinc-500 uppercase tracking-wide mb-1.5 block">Price (₦)</label><input type="number" inputmode="decimal" id="price-input" step="0.01" required class="w-full p-3.5 rounded-xl bg-zinc-50 dark:bg-zinc-800 border border-zinc-200 dark:border-zinc-700 focus:border-teal-500 outline-none dark:text-white font-bold" placeholder="0.00"></div>
                    <div class="flex-1"><label class="text-xs font-bold text-zinc-500 uppercase tracking-wide mb-1.5 block">Bulk Deal</label><input type="text" id="bulk-input" class="w-full p-3.5 rounded-xl bg-zinc-50 dark:bg-zinc-800 border border-zinc-200 dark:border-zinc-700 focus:border-teal-500 outline-none dark:text-white" placeholder="e.g. 2 for 50"></div>
                </div>

                <div id="cost-price-container" class="hidden">
                    <label class="text-xs font-bold text-teal-600 uppercase tracking-wide mb-1.5 block">Cost Price (Admin Only)</label>
                    <input type="number" inputmode="decimal" id="cost-input" step="0.01" class="w-full p-3.5 rounded-xl bg-teal-50 dark:bg-teal-900/20 border border-teal-200 dark:border-teal-800 focus:border-teal-500 outline-none dark:text-white font-mono" placeholder="How much did you buy it?">
                </div>

                <div>
                    <label class="text-xs font-bold text-zinc-500 uppercase tracking-wide mb-1.5 block">Category</label>
                    <div class="flex gap-2">
                        <select id="category-input" class="flex-1 p-3.5 rounded-xl bg-zinc-50 dark:bg-zinc-800 border border-zinc-200 dark:border-zinc-700 focus:border-teal-500 outline-none dark:text-white appearance-none"><option value="General">General</option></select>
                        <button type="button" onclick="window.quickAddCategory()" class="bg-zinc-100 dark:bg-zinc-800 px-3 rounded-xl border border-zinc-200 dark:border-zinc-700 text-zinc-500 hover:text-teal-600"><i data-lucide="plus" class="w-5 h-5"></i></button>
                    </div>
                </div>
                <button type="submit" id="save-btn" class="w-full py-4 bg-teal-600 text-white font-bold rounded-2xl hover:bg-teal-700 shadow-lg shadow-teal-600/20 active:scale-95 transition-all mt-2">Save Item</button>
            </form>
        </div>
    </div>

    <div id="admin-modal" class="hidden fixed inset-0 z-50 flex items-center justify-center px-4 py-6">
        <div onclick="window.closeModal('admin-modal')" class="fixed inset-0 bg-zinc-900/80 backdrop-blur-sm"></div>
        <div class="relative bg-zinc-50 dark:bg-zinc-900 w-full max-w-2xl h-[90vh] rounded-3xl shadow-2xl flex flex-col overflow-hidden ring-1 ring-white/10">
            <div class="bg-white dark:bg-zinc-900 px-6 py-5 flex justify-between items-center border-b border-zinc-100 dark:border-zinc-800">
                <div class="flex items-center gap-3"><div class="bg-teal-100 dark:bg-teal-900/30 p-2 rounded-xl"><i data-lucide="shield" class="w-5 h-5 text-teal-600 dark:text-teal-400"></i></div><h3 class="font-black text-zinc-900 dark:text-white text-lg">Admin HQ</h3></div>
                <button onclick="window.closeModal('admin-modal')" class="bg-zinc-100 dark:bg-zinc-800 text-zinc-500 hover:text-zinc-900 p-2.5 rounded-xl transition-colors"><i data-lucide="x" class="w-6 h-6"></i></button>
            </div>
            
            <div class="grid grid-cols-5 bg-white dark:bg-zinc-900 border-b border-zinc-100 dark:border-zinc-800 px-2 overflow-x-auto">
                <button onclick="window.switchAdminTab('stats')" class="tab-btn active py-4 text-[11px] font-extrabold uppercase tracking-wide text-zinc-400 dark:text-zinc-500" id="tab-stats">Stats</button>
                <button onclick="window.switchAdminTab('team')" class="tab-btn py-4 text-[11px] font-extrabold uppercase tracking-wide text-zinc-400 dark:text-zinc-500" id="tab-team">Team</button>
                <button onclick="window.switchAdminTab('logs')" class="tab-btn py-4 text-[11px] font-extrabold uppercase tracking-wide text-zinc-400 dark:text-zinc-500" id="tab-logs">Logs</button>
                <button onclick="window.switchAdminTab('trash')" class="tab-btn py-4 text-[11px] font-extrabold uppercase tracking-wide text-zinc-400 dark:text-zinc-500" id="tab-trash">Bin</button>
                <button onclick="window.switchAdminTab('tools')" class="tab-btn py-4 text-[11px] font-extrabold uppercase tracking-wide text-zinc-400 dark:text-zinc-500" id="tab-tools">Tools</button>
            </div>

            <div class="flex-1 overflow-y-auto p-6 custom-scrollbar bg-zinc-50/50 dark:bg-zinc-950/50">
                <div id="view-stats" class="space-y-5">
                    <div class="grid grid-cols-2 gap-4">
                        <div class="bg-white dark:bg-zinc-800 p-5 rounded-2xl border border-zinc-100 dark:border-zinc-700 shadow-sm"><div class="text-zinc-400 text-[10px] font-bold uppercase tracking-wider mb-2">Active Items</div><div class="text-3xl font-black text-zinc-900 dark:text-white" id="stat-active-count">0</div></div>
                        <div class="bg-white dark:bg-zinc-800 p-5 rounded-2xl border border-zinc-100 dark:border-zinc-700 shadow-sm"><div class="text-zinc-400 text-[10px] font-bold uppercase tracking-wider mb-2">Total Database</div><div class="text-3xl font-black text-zinc-900 dark:text-white" id="stat-total-db">0</div></div>
                    </div>
                    <div class="bg-white dark:bg-zinc-800 p-5 rounded-2xl border border-zinc-100 dark:border-zinc-700 shadow-sm"><h4 class="text-xs font-bold text-zinc-500 uppercase mb-4">Price Range</h4><div class="h-48 relative"><canvas id="priceChart"></canvas></div></div>
                </div>
                
                <div id="view-team" class="hidden space-y-4">
                    <div class="bg-white dark:bg-zinc-800 p-5 rounded-2xl border border-zinc-100 dark:border-zinc-700 shadow-sm">
                        <h4 class="font-bold text-zinc-800 dark:text-white mb-2">Add Team Member</h4>
                        <form id="add-staff-form" class="flex flex-col gap-3">
                            <input type="email" id="new-staff-email" required class="w-full p-3 rounded-xl border border-zinc-200 dark:border-zinc-600 dark:bg-zinc-700 dark:text-white text-sm focus:ring-2 focus:ring-teal-500 outline-none" placeholder="Email address">
                            <div class="flex gap-2">
                                <select id="new-staff-role" class="flex-1 p-3 rounded-xl border border-zinc-200 dark:border-zinc-600 dark:bg-zinc-700 dark:text-white text-sm">
                                    <option value="manager">Manager</option>
                                    <option value="staff">Staff (Read Only)</option>
                                    <option value="admin">ADMIN (Full Access)</option> </select>
                                <button type="submit" class="bg-teal-600 text-white px-5 rounded-xl text-sm font-bold hover:bg-teal-700">Add</button>
                            </div>
                        </form>
                    </div>
                    <div id="staff-list" class="space-y-2"></div>
                </div>

                <div id="view-logs" class="hidden space-y-3">
                    <div class="flex items-center justify-between px-1"><span class="text-xs font-bold text-zinc-500 uppercase tracking-wide">Audit History</span><button onclick="window.switchAdminTab('logs')" class="text-zinc-400 hover:text-teal-600"><i data-lucide="refresh-cw" class="w-3 h-3"></i></button></div>
                    <div id="logs-list" class="space-y-2"></div>
                </div>

                <div id="view-trash" class="hidden space-y-3">
                    <div class="flex justify-between items-center px-1 mb-2"><span class="text-xs font-bold text-zinc-500 uppercase tracking-wide">Deleted Items</span></div>
                    <div id="trash-list" class="space-y-2"></div>
                </div>
                
                <div id="view-tools" class="hidden space-y-4">
                    <div class="bg-white dark:bg-zinc-800 p-5 rounded-2xl border border-zinc-100 dark:border-zinc-700 shadow-sm"><div class="flex items-center justify-between"><div class="flex items-center gap-3"><div class="bg-blue-100 dark:bg-blue-900/30 p-2 rounded-lg"><i data-lucide="upload-cloud" class="w-5 h-5 text-blue-600 dark:text-blue-400"></i></div><div><h4 class="font-bold text-zinc-800 dark:text-white text-sm">Import CSV</h4></div></div><input type="file" id="csv-file-input" accept=".csv" class="hidden" onchange="window.handleFileUpload(this)"><button onclick="document.getElementById('csv-file-input').click()" class="bg-blue-600 text-white px-4 py-2 rounded-lg font-bold text-xs hover:bg-blue-700">Select File</button></div></div>
                    <div class="bg-white dark:bg-zinc-800 p-5 rounded-2xl border border-zinc-100 dark:border-zinc-700 shadow-sm"><div class="flex items-center justify-between"><div class="flex items-center gap-3"><div class="bg-emerald-100 dark:bg-emerald-900/30 p-2 rounded-lg"><i data-lucide="download" class="w-5 h-5 text-emerald-600 dark:text-emerald-400"></i></div><div><h4 class="font-bold text-zinc-800 dark:text-white text-sm">Export CSV</h4></div></div><button onclick="window.exportData()" class="bg-emerald-500 text-white px-4 py-2 rounded-lg font-bold text-xs hover:bg-emerald-600">Download</button></div></div>
                    <div class="bg-white dark:bg-zinc-800 p-5 rounded-2xl border border-zinc-100 dark:border-zinc-700 shadow-sm">
                        <h4 class="font-bold text-zinc-800 dark:text-white text-sm mb-2">Bulk Price Adjuster</h4>
                        <div class="flex gap-2">
                            <input type="number" id="inflation-input" class="w-full p-2 rounded border" placeholder="Percentage %">
                            <button onclick="window.applyBulkUpdate('increase')" class="bg-emerald-500 text-white px-4 rounded font-bold">Increase</button>
                            <button onclick="window.applyBulkUpdate('decrease')" class="bg-rose-500 text-white px-4 rounded font-bold">Decrease</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script type="module" src="./main.js"></script>
</body>
</html>
